\chapter{La logica della teoria dei tipi di \textit{Martin-L$\ddot{o}$f}}
\label{cap:la-logica-della-teoria-dei-tipi-di-Martin-Lof}
Molti tipi, come visto nei capitoli precedenti hanno un significato logico.\\\textit{Ma qual'\`e la logica che viene affrontata in \textit{type-theory}?}\\\\
\noindent I tipi descritti fino a ora sono sufficienti per interpretare le formule, con predicati dipendenti dal tipo, della logica \textbf{predicativa con l'uguaglianza}. Tuttavia la logica che la teoria dei tipi, di questi tipi, rende valida \`e la \textbf{logica intuizionistica} e non quella classica.\\\\
\noindent
\textit{Quale \`e la logica valida in teoria dei tipi?}\\\\
\noindent Dipende dalla teoria dei tipi (dalla teoria dei tipi di \textit{Martin-L$\ddot{o}$f} si rende valida solo quella intuizionistica).\\
Di seguito do la definizione per induzione sulle formule. In queste il contesto tipa le variabili libere della formula.
\begin{center}
($\bot$)$^I$[$\Gamma$] ${\overset{\mathit{def}}{\equiv}}$ N$_0$ (tipo vuoto) type[$\Gamma$]\\
(\textit{tt})$^I$[$\Gamma$] ${\overset{\mathit{def}}{\equiv}}$ N$_1$ (tipo singoletto) type[$\Gamma$]\\
($\varphi$ $\vee$ $\psi$)$^I$[$\Gamma$] ${\overset{\mathit{def}}{\equiv}}$ $\varphi^I$ $+$ $\psi^I$ type[$\Gamma$]\\
($\varphi$ $\&$ $\psi$)$^I$[$\Gamma$] ${\overset{\mathit{def}}{\equiv}}$ $\varphi^I$ $\times$ $\psi^I$ type[$\Gamma$]\\
($\varphi$ $\rightarrow$ $\psi$)$^I$[$\Gamma$] ${\overset{\mathit{def}}{\equiv}}$ $\prod_{z \in \varphi^I}$ $\psi^I$ type[$\Gamma$]\\
($\neg$ $\varphi$)$^I$ ${\overset{\mathit{def}}{\equiv}}$ $\varphi^I$ $\rightarrow$ $\bot^I$ ${\overset{\mathit{def}}{\equiv}}$ $\varphi^I$ $\rightarrow$ N$_0$ type[$\Gamma$]\\
($\forall_{x \in A}$ $\varphi$(x)) ${\overset{\mathit{def}}{\equiv}}$ $\prod\limits_{x \in A}$($\varphi$(x))$^I$ type[$\Gamma$]\\
(t $\equiv$ s)$^I$[$\Gamma$] ${\overset{\mathit{def}}{\equiv}}$ Id(A,t,s) type[$\Gamma$] $\Rightarrow$ \textit{unico predicato atomico}\\
($\exists_{x \in A}$ $\varphi$(x))$^I$[$\Gamma$] ${\overset{\mathit{def}}{\equiv}}$ $\sum\limits_{x \in A}$($\varphi$(x))$^I$[$\Gamma$]
\end{center}
\noindent
Da tenere presente che per noi vale
\begin{center}\textbf{$\varphi$(x) type[x $\in$ A}]\end{center}
e in generale una formula $\varphi$(x) prop[x $\in$ A], con prop che dipendono da tipi e A tipi.\\
Invece sono formule non valide
\cancel{$\forall$ $\varphi$(x)} \cancel{$\exists$ $\varphi$(x)}, 
in quanto le variabili senza tipo non esistono in teoria dei tipi.\\\\
\noindent
\textbf{Lemma} per ogni formula interpretata, il giudizio di tipo che la interpreta \`e derivabile nella teoria dei tipi.\\\\
\noindent
\textit{Definizione}\\\\
\noindent
Con il giudizio \textbf{$\alpha$ prop[$\Gamma$]} (sintassi della logica del primo ordine), con $\alpha$ formula del linguaggio predicativo con l'uguaglianza a variabili tipate,
si intende il giudizio \textbf{$\alpha^I$ type[$\Gamma$]} (in teoria dei tipi), ove questo \`e la traduzione di $\alpha$ nel linguaggio di una formula predicativa con l'uguaglianza.\\\\
\noindent
Va ricordato che $\alpha$ prop[$\Gamma$] $\equiv$ predicato che \`e una formula proposizionale su $\Gamma$
\begin{center}
\textbf{$\alpha$ prop} (secondo il solito uso di preposizione) \quad \textbf{sse} \quad \textbf{$\alpha$ prop[$\Gamma$]}
\end{center}
\vspace{0.3cm}
\textit{Definizione}\\\\
\noindent
Introduciamo il concetto di \textbf{dimostrazioni logiche}.\\
Date le preposizioni $\phi$ prop[$\Gamma$] e $\alpha_i$ prop[$\Gamma$] per i $=$ 1,..,n derivabili in teoria dei tipi.\\
Introduciamo il \textbf{giudizio $\phi$ true[$\Gamma$,$\alpha_1$ true,...,$\alpha_n$ true]}. In questo modo, si definisce il \textbf{contesto spuro}, dove $\Gamma$ \`e il solito contesto e $\alpha_1$ true,...,$\alpha_n$ true \`e un constesto nuovo di assunzioni di proposizioni.\\\\
\noindent
Introdotto il giudizio diciamo che \`e derivabile se esiste un termine (detto \textit{proof-term}) pf tale che pf $\in$ $\phi$[$\Gamma$,x$_1$ $\in$ $\alpha_1$,...,x$_n$ $\in$ $\alpha_n$] \`e derivabile in una teoria dei tipi.\\\\
\noindent \textit{Definizione}\\
(Per ricollegare il calcolo del primo ordine con la logica del primo anno)\\\\
\noindent 
Preso un sequente, in formule della logica predicativa con l'uguaglianza  e variabili, nel linguaggio \textit{L}, tipate vale che\\
\textbf{({\scriptsize$\sum$} $\vdash_\Gamma$ $\Delta$)$^I$ ${\overset{\mathit{def}}{=}}$ ($\Delta^\vee$)$^I$ type $[$ $\Gamma$,x $\in$ ({\scriptsize$\sum$}$^\&$)$^I$ $]$}\\
Per il quale vale una definizione per induzione dei termini:
\begin{itemize}
\item {\scriptsize$\sum$}$^\&$
\begin{itemize}
\item $[$ $]$ $^\&$ $\equiv$ \textit{tt}
\item $[${\scriptsize$\sum$}$^I$,$\varphi$ $]$ $^\&$ $\equiv$ ({\scriptsize$\sum$}$^\&$) \& $\varphi$
\end{itemize}
\item $\Delta^\vee$
\begin{itemize}
\item $[$ $]$ $^\vee$ $\equiv$ \textit{$\bot$}
\item $[$ $\Delta^I$,$\varphi$ $]$ $^\vee$ $\equiv$ ($\Delta^\vee$) $\vee$ $\varphi$
\end{itemize}
\end{itemize}
\noindent
\newpage
\noindent \textit{Definzione}\\\\
\noindent Un sequente {\scriptsize$\sum$} $\vdash_\Gamma$ $\Delta$ \`e valido in teoria dei tipi sse ($\Delta^\vee$)$^I$ true [$\Gamma$,({\scriptsize$\sum$}$^\&$)$^I$ true] \`e derivabile.\\
Ovvero se esiste un pf tale che pf $\in$ ($\Delta^\vee$)$^I$[$\Gamma$,x $\in$ ({\scriptsize$\sum$}$^\&$)$^I$].\\
Si pu\`o dimostrare ({\scriptsize$\sum$} $\vdash_\Gamma$ $\Delta$)$^I$ \`e derivabile sse ($\Delta^\vee$)$^I$ type[$\Gamma$] \`e derivabile.
\\\\
\noindent
\textbf{Teorema} i sequenti derivabili del calcolo della deduzione naturale \textit{DNI}\footnote{Logica Intuizionistica.} sono validi.\\
\textit{Non sono validi quelli della logica classica. Perch\`e?} Per il Principio del terzo escluso.\\\\
\noindent
\textbf{Il Principio del terzo escluso} non \`e valido in teoria dei tipi perch\`e per ogni $\varphi$ noi dovremmo dedurre, in teoria dei tipi, un \textbf{pf $\in$ ($\varphi$ $\vee$ $\neg\varphi$)$^I$ $[$ $]$ $\equiv$ $\varphi^I$ $+$ $\neg\varphi^I$ $[$ $]$}. 
\begin{center}
\textit{DNI} $+$ Principio del terzo escluso $\equiv$ calcolo dei sequenti della logica classica prediativa con l'uguaglianza
\end{center}
\noindent
$\Rightarrow$ logica classica $=$ logica intuizionistica $+$ la derivabilit\`a $\vdash$ $\varphi$ $\vee$ $\neg\varphi$\\\\
\noindent
Il Principio del terzo escluso \`e la derivabilit\`a $\vdash$ $\varphi$ $\vee$ $\neg\varphi$, per la formula $\varphi$. Ma $\vdash$ $\varphi$ $\vee$ $\neg\varphi$ non \`e valido in teoria dei tipi perch\`e esiste G, formula, per cui $\vdash$ G $\vee$ $\neg$G non \`e valido.\\\\\
\noindent
\textit{Idea della Dimostrazione}\\\\
\noindent Metto assieme il teorema di \textit{G$\ddot{o}$del} con quello della forma normale forte.
\begin{center}pf $\in$ G $\vee$ $\neg$G $=$ G$^I$ $+$ $\neg$G$^I$\end{center}
Questa va ridotta in forma normale, che corrisponde a una delle due forme seguenti:
\begin{itemize}
\item NF(pf) $=$ inl(pf$_1$) con pf$_1$ $\in$ G$[$ $]$
\item NF(pf) $=$ inr(pf$_2$) con pf$_2$ $\in$ G$[$ $]$
\end{itemize}
Ma \textit{G$\ddot{o}$del} ha dimostrato che n\`e $\vdash$ G$[$ $]$ e neanche $\vdash$ $\neg$G$[$ $]$ sono derivabili ($\Leftrightarrow$ non valido in teoria dei tipi.)

\section{Esercizi}
\label{sec:cap10}
\paragraph{1)}
\textbf{Supposto A type [$\Gamma$], B type[$\Gamma$] e R(x,y) type[$\Gamma, x \in A, y \in B$, dimostrare che il seguente principio di scelta, detto comunemente assioma di scelta
\begin{center}$\forall_{x \in A}$ $\exists_{y \in B}$ $\rightarrow$ $\exists_{f \in A \rightarrow B}$ $\forall_{x \in A}$ $R(x,f(x)$) true[$\Gamma$]\end{center}
}
\noindent
\textbf{Soluzione}
\\\\
\noindent
Devo verificare che pf $\in$ $\forall_{x \in A}$ $\exists_{y \in B}$R(x,y) $\rightarrow$ $\exists_{f \in A \rightarrow B}$ $\forall_{x \in A}$ $R(x,f(x)$) [$\Gamma$] sia derivabile in teoria dei tipi.\\
Applico la formula ($\varphi$ $\rightarrow$ $\psi$)$^I$[$\Gamma$] ${\overset{\mathit{def}}{\equiv}}$ $\prod_{z \in \varphi^I}$ $\psi^I$ type[$\Gamma$]:\\\\
\noindent
$\Rightarrow$ pf $\in$ $\prod_{z \in (\prod_{x \in A} \hspace{0.3cm} \sum_{y \in B} R(x,y))}$ $\sum_{f \in A \rightarrow B}$ $\prod_{x \in A}$ $R(x,f(x))$ [$\Gamma$]\\\\
\noindent
Ora posso applicare \textit{(I-{\scriptsize$\prod$})}:\\
l'istanza deve rispettare le regole di introduzione del tipo prodotto dipendente, somma indiciata e del tipo funzione, dunque
\begin{itemize}
\item prima applicazione, considerando $\prod_{z \in (\prod_{x \in A} \hspace{0.2cm} \sum_{y \in B} R(x,y))}$ C(z) [$\Gamma$]: $\lambda$z.c(z)
\item seconda applicazione considerando $\prod_{z \in (\prod_{x \in A} \hspace{0.2cm} \sum_{y \in B} R(x,y))}$ $\sum_{f \in A \rightarrow B}$ C(f) [$\Gamma$]: $\lambda$z.$<\pi_1z,\pi_2z>$.c(f), perch\`e per ogni z, z $\in$ f e z $\in$ C
\item terza applicazione, considerando $\prod_{z \in (\prod_{x \in A} \hspace{0.2cm} \sum_{y \in B} R(x,y))}$ $\sum_{f \in A \rightarrow B}$ C(f) [$\Gamma$] devo individuare un elemento che appartenga a A: $\lambda$z.$<\pi_1$($Ap(z,x)$), $\pi_2$($Ap(z,x)$)$>$.c(f)
\item quarta applicazione, considerando $\prod_{z \in (\prod_{x \in A} \hspace{0.2cm} \sum_{y \in B} R(x,y))}$ $\rightarrow$ $\sum_{f \in A \rightarrow B}$ $\prod_{x \in A}$ $R(x,f(x))$ [$\Gamma$]: $\lambda$z.$<\lambda$ $x.\pi_1$($Ap(z,x)$), $\lambda$ $x.\pi_2$($Ap(z,x)$)$>$
\end{itemize}
\noindent
\\\\
$\theta$ $=$ $\Gamma$,z $\in$ $\prod_{x \in A}$ $\sum_{y \in B} R(x,y)$
\begin{prooftree}
\scriptsize
\AxiomC{\textbf{1}}

\AxiomC{\textbf{2}}

\AxiomC{\textbf{3}}
\LeftLabel{I-{\scriptsize $\sum$}}
\TrinaryInfC{$<\lambda$ $x.\pi_1$($Ap(z,x)$), $\lambda$ $x.\pi_2$($Ap(z,x)$)$>$ $\in$ $\sum_{f \in A \rightarrow B}$ $\prod_{x \in A}$ $R(x,f(x))$ [$\theta$]}
\LeftLabel{I-{\scriptsize $\prod$}}
\UnaryInfC{$\lambda$z.$<\lambda$ $x.\pi_1$($Ap(z,x)$), $\lambda$ $x.\pi_2$($Ap(z,x)$)$>$ $\in$ $\prod_{z \in (\prod_{x \in A} \hspace{0.2cm} \sum_{y \in B} R(x,y))}$ $\sum_{f \in A \rightarrow B}$ $\prod_{x \in A}$ $R(x,f(x))$ [$\Gamma$]}
\end{prooftree}


\normalsize
\noindent
\vspace{0.5cm}
\textbf{1}
\scriptsize
\begin{adjustwidth}{-6em}{}
\begin{prooftree}
\AxiomC{}
\UnaryInfC{A type[$\Gamma$]}

\AxiomC{\textbf{$\bigstar$}}
\UnaryInfC{R(x,y) type[$\Gamma$,z $\in$ $\prod_{x \in A}$]}
\LeftLabel{{\scriptsize$\sum$}-F}
\UnaryInfC{ $\sum_{y \in B} R(x,y)$ type[$\Gamma$,z $\in$ $\prod_{x \in A}$]}
\LeftLabel{F-c}\RightLabel{(x $\in$ A) $\in$ ($\Gamma$,z $\in$ $\prod_{x \in A}$)}
\UnaryInfC{$\theta$ cont}
\LeftLabel{ind-ty}
\BinaryInfC{A type[$\theta$]}
\LeftLabel{F-c}\RightLabel{(x $\in$ A) $\in$ $\theta$}
\UnaryInfC{$\theta$,x $\in$ A cont}
\LeftLabel{var}
\UnaryInfC{z $\in$ $\prod_{x \in A}$ $\sum_{y \in B}R(x,y)$[$\theta$,x $\in$ A]}
\AxiomC{(\textbf{$\ast$})}
\UnaryInfC{$\theta$,x $\in$ A cont}
\LeftLabel{var}
\UnaryInfC{$x \in A $[$\theta$,x $\in$ A]}
\LeftLabel{E-{\scriptsize$\prod$}}
\BinaryInfC{$Ap(z,x)$ $\in$ $\sum_{y \in B}R(x,y)$[$\theta$,x $\in$ A]}
\LeftLabel{PJ$_1$-x}
\UnaryInfC{$\pi_1$($Ap(z,x)$) $\in$ B[$\theta$,x $\in$ A]}
\LeftLabel{I-$\rightarrow$}
\UnaryInfC{$\lambda$ $x.\pi_1$($Ap(z,x)$) $\in$ A $\rightarrow$ B[$\theta$]}
\end{prooftree}
\end{adjustwidth}

\normalsize
\textbf{2}\\\\
\noindent
R(x,Ap($\lambda$ $x.\pi_1$($Ap(z,x)$),x)) $\rightarrow_1$ R(x, $\pi_1$($Ap(z,x)$) con \textit{$\beta_\rightarrow-red$}
\noindent
\vspace{0.5cm}
\scriptsize
\begin{adjustwidth}{-4em}{}
\begin{prooftree}
\AxiomC{\textbf{($\ast$)}}
\UnaryInfC{z $\in$ $\prod_{x \in A}$ $\sum_{y \in B}$ R(x,y)[$\theta,x \in A]$}
\AxiomC{\textbf{($\ast$)}}
\UnaryInfC{x $\in$ A [$\theta,x \in A]$}
\LeftLabel{E-{\scriptsize $\prod$}}
\BinaryInfC{$Ap(z,x)$ $\in$ $\sum_{y \in B}$ R(x,y)[$\theta,x \in A]$}
\LeftLabel{PJ$_2$-x}
\UnaryInfC{$\pi_2$($Ap(z,x)$) $\in$ R(x, $\pi_1$($Ap(z,x)$)[$\theta,x \in A]$}
\AxiomC{}
\UnaryInfC{ R(x, $\pi_1$($Ap(z,x)$) $=$ R(x,Ap($\lambda$ $x.\pi_1$($Ap(z,x)$),x))[$\theta,x \in A]$}

\LeftLabel{conv}
\BinaryInfC{$\pi_2$($Ap(z,x)$) $\in$ R(x,Ap($\lambda$ $x.\pi_1$($Ap(z,x)$),x))[$\theta,x \in A]$}
\LeftLabel{I-{\scriptsize $\prod$}}
\UnaryInfC{$\lambda$ $x.\pi_2$($Ap(z,x)$) $\in$ $\prod_{x \in A}$ R(x,Ap($\lambda$ $x.\pi_1$($Ap(z,x)$),x))[$\theta]$}
\end{prooftree}
\end{adjustwidth}


\normalsize
\noindent
\vspace{0.5cm}
\textbf{3}
\scriptsize
\begin{prooftree}
\AxiomC{}
\UnaryInfC{A type [$\theta,f \in A \rightarrow B$]}
\AxiomC{}
\UnaryInfC{$R(x,f(x))$ [$\theta,f \in A \rightarrow B,x \in A]$}
\LeftLabel{F-{\scriptsize $\prod$}}
\BinaryInfC{$\prod_{x \in A}$ $R(x,f(x))$ [$\theta,f \in A \rightarrow B$]}
\LeftLabel{F-{\scriptsize $\sum$}}
\UnaryInfC{$\sum_{f \in A \rightarrow B}$ $\prod_{x \in A}$ $R(x,f(x))$ [$\theta]$}
\end{prooftree}
\noindent
\normalsize
\noindent Ho usato \textbf{($\ast$)} per concludere le derivazioni gi\`a svolte all'interno dell'albero.\\
\textbf{$\bigstar$} derivazioni gi\`a risolte, o simili, negli esercizi precedenti; che prevedono una combinazioni di istruzioni di indebolimento/assunzione di variabili/formazione di contesto per verificare l'assioma [ ] cont.\\