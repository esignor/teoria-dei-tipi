\chapter{Tipo delle funzioni}
\label{cap: funzioni}
%lezione 20
Il tipo delle funzione \`e definito dalle regole seguenti.

\section{Regole di Formazione}
\label{sec: formazione-funzioni}
\begin{prooftree}
\AxiomC{B type [$\Gamma$]}
\AxiomC{C type [$\Gamma$]}
\LeftLabel{F-$\rightarrow$)}
\BinaryInfC{B $\rightarrow$ C type[$\Gamma$]}
\end{prooftree}

\section{Regole di Introduzione}
\label{sec: introduzione-funzioni}
\begin{prooftree}
\AxiomC{c(x) $\in$ C[$\Gamma$,x $\in$ B]}
\LeftLabel{I-$\rightarrow$)}
\UnaryInfC{$\lambda$x$^B$.c(x) $\in$ B $\rightarrow$ C[$\Gamma$]}
\end{prooftree}
\noindent
\textit{C'\`e una meta-variabile, con il quale si indica un termine che pu\`o dipendere o meno da x.}

\section{Regole di Eliminazione}
\label{sec: eliminazione-funzione}
\begin{prooftree}
\AxiomC{f $\in$ B $\rightarrow$ C[$\Gamma$]}
\AxiomC{b $\in$ B[$\Gamma$]}
\LeftLabel{E-$\rightarrow$)}
\BinaryInfC{Ap(f,b) $\in$ C[$\Gamma$]}
\end{prooftree}
\noindent
\textit{Il tipo non \`e induttivo, per cui la regola di eliminazione non definisce un ricorsivo, n\`e principi di induzione.}

\section{Regole di Conservazione}
\label{sec: conservazione-funzione}
\begin{prooftree}
\AxiomC{c(x) $\in$ C[$\Gamma$, x $\in$ B]}
\AxiomC{b $\in$ B[$\Gamma$]}
\LeftLabel{C-$\rightarrow$)}
\BinaryInfC{Ap($\lambda$x$^B$.c(x),b] $=$ c(b)$\in$ C[$\Gamma$]}
\end{prooftree}

\section{Regole di Uguaglianza}
\label{sec: uguaglianza-funzione}
\begin{prooftree}
\AxiomC{f$_1$ $=$ f$_2$ $\in$ B $\rightarrow$ C[$\Gamma$]}
\AxiomC{b$_1$ $=$ b$_2$ $\in$ B[$\Gamma$]}
\LeftLabel{eq-E-$\rightarrow$)}
\BinaryInfC{Ap(f$_1$,b$_1$) $=$ Ap(f$_2$,b$_2$) $\in$ C[$\Gamma$]}
\end{prooftree}

\begin{prooftree}
\AxiomC{c$_1$(x) $=$ c$_2$(x) $\in$ C[$\Gamma$,x $\in$ B]}
\LeftLabel{eq-I-$\rightarrow$)}
\UnaryInfC{$\lambda$x$^B$.c$_1$(x) $=$ $\lambda$x$^B$.c$_2$(x) $\in$ B $\rightarrow$ C[$\Gamma$]}
\end{prooftree}
\normalsize
\textit{La regola (eq-I-$\rightarrow$) prende anche il nome di $\xi$-rule ed \`e una regola difficile da modellare.}


\section{Semantica operazionale del tipo funzione}
\label{sec: semantica-operazionale-funzione}
La relazione $\rightarrow_1$ viene definita all'interno dei termini con l'uso delle seguenti regole di riduzione:
\begin{itemize}
\item $\beta_{\rightarrow}$-red) Ap($\lambda$x.c(x),b) $\rightarrow_1$ c(b) \\
\textit{per la programmazione:} Ap($\lambda$x.c,b) $\rightarrow_1$ c[$\frac{x}{b}$] 
\item \AxiomC{f$_1$ $\rightarrow_1$ f$_2$}
\LeftLabel{$\rightarrow$-red$_1$)}
\UnaryInfC{Ap(f$_1$,b) $\rightarrow_1$ Ap(f$_2$,b)}
\DisplayProof \qquad
\item \AxiomC{b$_1$ $\rightarrow_1$ b$_2$}
\LeftLabel{$\rightarrow$-red$_2$)}
\UnaryInfC{Ap(f,b$_1$) $\rightarrow_1$ Ap(f,b$_2$)}
\DisplayProof
\item novit\`a della somma indiciata forte rispetto al tipo singoletto
\AxiomC{c$_1$ $\rightarrow_1$ c$_2$}
\LeftLabel{$\rightarrow$-red)}
\UnaryInfC{$\lambda$x.c$_1$ $\rightarrow_1$ $\lambda$x.c$_2$}
\DisplayProof
\end{itemize}

\section{Osservazioni dal punto di vista logico}
\label{sec:osservazioni-dal-punto-di-vista-logico-funzione}

\subsection{La regola di Introduzione}
\label{subsec:osservazioni-introduzione-funzione}
Questo tipo \`e importante perch\`e c'\`e di mezzo la logica. Se difatti prendo la regola di \textit{Introduzione} e ci metto le preposizioni
\begin{prooftree}
\AxiomC{$\beta$ prop[$\Gamma$]}
\AxiomC{$\gamma$ prop[$\Gamma$]}
\LeftLabel{F-$\rightarrow$)}
\BinaryInfC{$\beta$ $\rightarrow$ $\gamma$ prop[$\Gamma$]}
\end{prooftree}
\noindent
Ove $\beta$ $\rightarrow$ $\gamma$ \`e un'implicazione logica.\\\\
\noindent 
$\beta$ $\rightarrow$ $\gamma$ \textit{(implicazione)} \quad $=$ \quad $\beta$ $\rightarrow$ $\gamma$ \textit{(tipo)}\\
Questo risulta vero perch\`e \textit(I-$\rightarrow$) afferma che se si ha
\begin{prooftree}
\AxiomC{c(x) $\in$ $\gamma$[$\Gamma$,$\Delta$,x $\in$ $\beta$]}
\LeftLabel{I-$\rightarrow$)}
\UnaryInfC{\cancel{$\lambda$x.c(x)} $\in$ $\beta$ $\rightarrow$ $\gamma$[$\Gamma$,$\Delta$]}
\end{prooftree}
\noindent
c(x) $\in$ $\gamma$ $\equiv$ $\gamma$ vero\\
x $\in$ $\beta$ $\equiv$ $\beta$ vero\\
$\beta$ $\rightarrow$ $\gamma$ $\equiv$ $\beta$ $\rightarrow$ $\gamma$ vero\\\\
\noindent
Che non \`e altro che la regola, nel calcolo dei sequenti, dell'implica a destra
\begin{prooftree}
\AxiomC{$\varphi_1,..\varphi_n,\beta$ $\vdash_\Gamma$ $\gamma$}
\LeftLabel{$\rightarrow$-D)}
\UnaryInfC{$\varphi_1,..\varphi_n$ $\vdash_\Gamma$ $\beta \rightarrow \gamma$}
\end{prooftree}

\subsection{La regola di Eliminazione (Modus Pones)}
\label{subsec:osservazioni-eliminazione-funzione}
\begin{prooftree}
\AxiomC{f $\in$ $\beta$ $\rightarrow$ $\gamma$[$\Gamma$]}
\AxiomC{b $\in$ $\beta$[$\Gamma$]}
\LeftLabel{E-$\rightarrow$)}
\BinaryInfC{? $\in$ $\gamma$[$\Gamma$]}
\end{prooftree}
\noindent
f $\in$ $\beta$ $\rightarrow$ $\gamma$ $\equiv$ $\beta$ $\rightarrow$ $\gamma$ vero\\
b $\in$ $\beta$ $\equiv$ $\beta$ vero\\
? $\in$ $\gamma$ $\equiv$ $\gamma$ vero\\
Che non \`e altro che la regola, nel calcolo dei sequenti, del Modus Pones
\begin{prooftree}
\AxiomC{$\gamma_1,..\gamma_n$ $\vdash_\Gamma$ $\beta$ $\rightarrow$ $\gamma$}
\AxiomC{$\gamma_1,..\gamma_n$ $\vdash_\Gamma$ $\beta$}
\LeftLabel{MP)}
\BinaryInfC{$\gamma_1,..\gamma_n$ $\vdash_\Gamma$ $\gamma$}
\end{prooftree} 


\section{Tipo prodotto dipendente}
\label{sec: tipo-prodotto-dipendente}
Il tipo prodotto dipendente o  indiciato (si chiama anche {\scriptsize $\prod$}), come gi\`a riscontrato per il tipo funzione, \`e un tipo non induttivo. Inoltre \`e un potenziamento espressivo, sempre, del tipo dello spazio delle funzioni (tipo funzioni \`e un caso particolare).\\
Le regole del prodotto indiciato dipendente che agisce su un tipo dipendente sono le seguenti.

\subsection{Regole di Formazione}
\label{subsec: formazione-prodotto-dip}
\begin{prooftree}
\AxiomC{B type [$\Gamma$]}
\AxiomC{C(x) type [$\Gamma$,x $\in$ B]}
\LeftLabel{F-{\scriptsize$\prod$})}
\BinaryInfC{$\prod\limits_{x \in B}$ C(x) type[$\Gamma$]}
\end{prooftree}

\subsection{Regole di Introduzione}
\label{subsec: introduzione-prodotto-dip}
\begin{prooftree}
\AxiomC{c(x) $\in$ C(x)[$\Gamma$,x $\in$ B]}
\LeftLabel{I-{\scriptsize$\prod$})}
\UnaryInfC{$\lambda$x$^B$.c(x) $\in$ $\prod\limits_{x \in B}$ C(x)[$\Gamma$]}
\end{prooftree}

\subsection{Regole di Eliminazione}
\label{subsec: eliminazione-prodotto-dip}
\begin{prooftree}
\AxiomC{f $\in$ $\prod\limits_{x \in B}$ C(x)[$\Gamma$]}
\AxiomC{b $\in$ B[$\Gamma$]}
\LeftLabel{E-{\scriptsize$\prod$})}
\BinaryInfC{Ap(f,b) $\in$ C(b)[$\Gamma$]}
\end{prooftree}
\noindent

\subsection{Regole di Conservazione}
\label{subsec: conservazione-prodotto-dip}
\begin{prooftree}
\AxiomC{c(x) $\in$ C(x)[$\Gamma$, x $\in$ B]}
\AxiomC{b $\in$ B[$\Gamma$]}
\LeftLabel{C-{\scriptsize$\prod$})}
\BinaryInfC{Ap($\lambda$x$^B$.c(x),b] $=$ c(b)$\in$ C(b)[$\Gamma$]}
\end{prooftree}

\subsection{Regole di Uguaglianza}
\label{subsec: uguaglianza-prodottop-dip}
\begin{prooftree}
\AxiomC{f$_1$ $=$ f$_2$ $\in$  $\prod\limits_{x \in B}$ C(x)[$\Gamma$]}
\AxiomC{b$_1$ $=$ b$_2$ $\in$ B[$\Gamma$]}
\LeftLabel{eq-E-{\scriptsize$\prod$})}
\BinaryInfC{Ap(f$_1$,b$_1$) $=$ Ap(f$_2$,b$_2$) $\in$ C(b$_1$)[$\Gamma$]}
\end{prooftree}

\begin{prooftree}
\AxiomC{c$_1$(x) $=$ c$_2$(x) $\in$ C(x)[$\Gamma$,x $\in$ B]}
\LeftLabel{eq-I-{\scriptsize$\prod$})}
\UnaryInfC{$\lambda$x$^B$.c$_1$(x) $=$ $\lambda$x$^B$.c$_2$(x) $\in$  $\prod\limits_{x \in B}$ C(x)[$\Gamma$]}
\end{prooftree}
\textit{La regola (eq-I-{\scriptsize$\prod$}) prende anche il nome di $\xi$-rule ed \`e una regola difficile da modellare.}

\begin{prooftree}
\AxiomC{B$_1$ $=$ B$_2$ $\in$ type[$\Gamma$]}
\AxiomC{c$_1$(x) $=$ c$_2$(x) type[$\Gamma$,x $\in$ B$_1$]}
\LeftLabel{eq-F-{\scriptsize$\prod$})}
\BinaryInfC{$\prod\limits_{x \in B}$ C$_1$(x)[$\Gamma$] $=$ $\prod\limits_{x \in B}$ C$_2$(x)[$\Gamma$]}
\end{prooftree}
\normalsize

\subsection{Osservazioni dal punto di vista logico}
\label{subsec:osservazioni-dal-punto-di-vista-logico-prodotto-dip}

\subsubsection{La regola di Formazione}
\label{subsubsec:osservazioni-formazione-prodotto-dip}
Se prendo la regola di \textit{Formazione} e ci metto le preposizioni, questa diventa
\begin{prooftree}
\AxiomC{B type [$\Gamma$]}
\AxiomC{$\varphi$(x) prop [$\Gamma$,x $\in$ B]}
\LeftLabel{F-{\scriptsize$\prod$})}
\BinaryInfC{$\forall_{x \in B}$ $\varphi$(x) prop[$\Gamma$]}
\end{prooftree}
\noindent
che rende vera la seguente definizione
\begin{center}$\forall_{x \in B}$ $\varphi$(x) ${\overset{\mathit{def}}{=}}$ $\prod\limits_{x \in B}$ $\varphi$(x)\end{center}
dalle regole \textit{(I-{\scriptsize$\prod$})} e \textit{(E-{\scriptsize$\prod$})}.\\
\paragraph{La regola di Introduzione}
\begin{prooftree}
\AxiomC{c(x) $\in$ $\varphi$(x)[$\Gamma$,x $\in$ B]}
\LeftLabel{I-{\scriptsize$\prod$})}
\UnaryInfC{? $\in$ $\prod\limits_{x \in B}$ $\varphi$(x)[$\Gamma$]}
\end{prooftree}
\noindent
che definisce nella \textit{set-theory} la regola del $\forall$. Difatti, la regola, con le opportune sostituzioni diventa
\begin{prooftree}
\AxiomC{$\varphi$(x) vero[$\Gamma$,$\Delta$,x $\in$ B]}
\LeftLabel{I-{\scriptsize$\prod$})}
\UnaryInfC{$\forall_{x \in B}$ $\varphi$(x) vero[$\Gamma$,$\Delta$]}
\end{prooftree}
\noindent
con $\Delta$ $\equiv$[x$_1$...$\varphi_1$...$x_n$...$\varphi_n$] e $\varphi_i$ prop[$\Gamma$]\\
Nel calcolo dei sequenti equivale al per ogni a destra
\begin{prooftree}
\AxiomC{$\Delta$ $\vdash_{\Gamma,x \in B}$ $\varphi(x)$}
\LeftLabel{$\forall$-D)}\RightLabel{x $\notin$ fv($\Delta$)}
\UnaryInfC{$\Delta$ $\vdash_\Gamma$ $\forall_{x \in B}$ $\varphi(x)$}
\end{prooftree}
\noindent 
\paragraph{La regola di Eliminazione}
\begin{prooftree}
\AxiomC{f $\in$ $\forall_{x \in B}$ $\varphi$(x)[$\Gamma$]}
\AxiomC{b $\in$ B[$\Gamma$]}
\LeftLabel{E-{\scriptsize$\prod$})}
\BinaryInfC{? $\in$ $\varphi$(b)[$\Gamma$]}
\end{prooftree}
\noindent
che con le opportune sostituzioni diventa, nel calcolo dei sequenti, una regola di eliminazione della riduzione naturale
\begin{prooftree}
\AxiomC{$\Delta$ $\vdash$ $\forall_{x \in B}$ $\varphi(x)$}
\AxiomC{b $\in$ B[$\Gamma$]}
\LeftLabel{E-{\scriptsize$\prod$})}
\BinaryInfC{$\Delta$ $\vdash$ $\varphi$(b)}
\end{prooftree}
con $\Delta$ $\equiv$ tutte assunzioni di prop[$\Gamma$]
\noindent

\vspace{0.5cm}
\noindent
Per concludere, il prodotto dipendente definisce sia:
\begin{enumerate}
\item L'\textbf{implicazione}
\begin{center} $\beta$ $\rightarrow$ $\gamma$ $\equiv$ $\prod\limits_{x \in B}$ $\gamma$ \end{center}
dove $\rightarrow$ indica famiglia costante
\item La \textbf{quantificazione esistenziale}
\begin{center}$\forall_{x \in B}$ $\varphi(x)$ $\equiv$ $\prod\limits_{x \in B}$ $\varphi(x)$ \end{center}
\end{enumerate}


